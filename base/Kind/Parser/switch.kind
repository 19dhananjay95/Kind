Kind.Parser.switch.case: Parser(Pair<Kind.Term, Kind.Term>)
  Parser {
    get key = Kind.Parser.term;
    get u = Kind.Parser.text_error(":", "Switch cases need to be separated by a ':'");
    get val = Kind.Parser.term;
    return {key, val};
  }

Kind.Parser.switch: Parser(Kind.Term)
  Parser {
    get init = Kind.Parser.init;
    get u = Kind.Parser.text_error("switch", "Expected \"switch \"");
    get cond = Kind.Parser.term;
    get u = Kind.Parser.text_error("{", "A switch needs an opening '{'");
    get cses = Parser.until!(Kind.Parser.text("}"), Kind.Parser.switch.case);
    Kind.Parser.text_error("default", "A switch needs a \"default\"");
    get dflt = Kind.Parser.term;
    get orig = Kind.Parser.stop(init);
    let term = List.fold!(cses)!(dflt, (cse, rest)
      open cse
      let term = Kind.Term.app(cond, cse.fst);
      let term = Kind.Term.app(term, Kind.Term.lam("", (x) Kind.Term.hol(Bits.e)));
      let term = Kind.Term.app(term, cse.snd);
      let term = Kind.Term.app(term, rest);
      term);
    return Kind.Term.ori(orig, term);
  }
