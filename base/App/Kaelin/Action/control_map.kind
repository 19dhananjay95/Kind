App.Kaelin.Action.control_map(glob: App.Kaelin.State.global): App.Kaelin.State.global
  let stage = glob@stage
  log("ta porraaaaaaa")
  case stage {
    planning: 
      log("aquiiiiiiiiiii")
      glob@stage <- App.Kaelin.Stage.planning(stage.control_map + 1, stage.local_tick, stage.seconds)
  } default glob