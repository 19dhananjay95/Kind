App.Kaelin.Stage.action.end(glob: App.Kaelin.State.global): App.Kaelin.State.global
  open glob
  case glob.stage {
    action:
      new_glob = glob@stage <- App.Kaelin.Stage.planning(0, 0, [])
      new_glob = new_glob@round <- new_glob@round + 1
      new_glob
  } default glob