App.Kaelin.Tile.creature.restore_ap(
  creature: App.Kaelin.Creature
): App.Kaelin.Creature
  open creature
  hero = creature@hero
  case I32.lte(creature.hp, 0) { //I32
    true: 
      creature
    false:
      new_ap = I32.div(hero@max_ap, 2)
      max_ap = I32.min(I32.add(creature.ap, new_ap), hero@max_ap)
      creature@ap <- max_ap
  }
